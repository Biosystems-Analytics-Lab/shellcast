{% extends "base.html.jinja" %}

{% block title %}Preferences - ShellCast{% endblock %}

{% block additional_head %}
  <!-- FirebaseUI CSS -->
  <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.css" />

  <!-- FirebaseUI JS -->
  <script defer src="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.js"></script>

  <!-- Custom JS -->
  <script defer src="{{ url_for('static', filename='preferences.js') }}"></script>
  <!-- Custom CSS -->
  <link type="text/css" rel="stylesheet" href="{{ url_for('static', filename='preferences.css') }}">
{% endblock %}

{% block content %}
  <h1 class="page-main-header">Preferences</h1>

  <div id="user-signed-out" style="display: none">
    <p>Creating an account with ShellCast allows you to add your own lease information and receive personalized notifications about potential lease closures.</p>
    <a role="button" class="btn btn-primary" id="sign-in" href="/signin?mode=select&signInSuccessUrl=/preferences">Sign in</a>
  </div>

  <div id="user-signed-in" style="display: none">
    <div id="forms">

      {# Generic profile information #}
      <form class="needs-validation mb-4" id="profile-information-form">
        <h4>My profile information</h4>
        {# <div class="mb-3">
          <label for="firstName">First name</label>
          <input type="text" class="form-control" id="firstName" placeholder="First name" value="Bob" readonly>
        </div>

        <div class="mb-3">
          <label for="lastName">Last name</label>
          <input type="text" class="form-control" id="lastName" placeholder="Last name" value="Smith" readonly>
        </div> #}

        <div class="mb-3">
          <label for="email">Email address</label>
          <input type="email" class="form-control" name="email-address" id="email-address" placeholder="you@example.com" aria-describedby="emailHelp">
          <div class="invalid-feedback">
            Please enter a valid email address for shipping updates.
          </div>
          <small id="emailHelp" class="form-text text-muted">
            This email address will be used for account updates as well as probable closure notifications (if you opt into them below).
          </small>
        </div>

        <div class="mb-3">
          <label for="phone">Mobile phone number</label>
          <div class="input-group">
            <div class="input-group-prepend"><div class="input-group-text">+1</div></div>
            <input type="tel" class="form-control" name="phone-number" id="phone-number" placeholder="(111) 222-3333" aria-describedby="phoneHelp">
            <div class="invalid-feedback" style="width: 100%;">
              Please enter a valid phone number.
            </div>
            <small id="phoneHelp" class="form-text text-muted" style="width: 100%;">
              This phone number must be able to receive text (SMS/MMS) messages. This phone number will receive probable closure notifications if you opt into them below.
            </small>
          </div>
        </div>

        <div style="text-align: right;">
          <button class="btn btn-primary" type="button" name="prof-form-cancel-btn" disabled>Cancel</button>
          <button class="btn btn-primary" type="button" name="prof-form-save-btn" disabled>Save</button>
        </div>
      </form>

      {# Lease preferences #}
      <h4>My leases</h4>
      <p>You can add a lease by searching for it by its NCDMF ID.</p>

      <div class="mb-3 search-bar">
        <div class="input-group">
          <input type="text" class="form-control search-input" placeholder="Add a lease by searching for it by its NCDMF ID..." aria-label="Add a lease by searching for it by its NCDMF ID" aria-describedby="lease-search-btn">
          <div class="input-group-append">
            <button class="btn btn-primary" type="button" id="lease-search-btn">Search</button>
            <button class="btn btn-primary" type="button" id="lease-clear-btn">Clear</button>
          </div>
        </div>

        <div class="list-group search-results" id="lease-search-results">
          <button type="button" class="list-group-item list-group-item-action">684</button>
          <button type="button" class="list-group-item list-group-item-action">4-C-89</button>
          <button type="button" class="list-group-item list-group-item-action">9613</button>
          <button type="button" class="list-group-item list-group-item-action">1860139</button>
          <button type="button" class="list-group-item list-group-item-action">1948054</button>
        </div>
      </div>

      <div id="leases">
        <div class="accordion" id="leases-accordion">
          {# leases are programmatically added here with JS #}
        </div>
      </div>

    </div>
  </div>
{% endblock %}
